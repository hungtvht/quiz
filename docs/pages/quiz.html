<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>TG - Quiz</title>
  <link rel="icon" type="image/png" sizes="32x32" href="../public/favicon.ico">

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <script src="../js/normalizeVietnameseText.js"></script>
  <style>
    :root {
  --bg-page: #121212;
  --bg-card: #1e1e1e;
  --text-main: #e0e0e0;
  --text-muted: #8a8a8a;
  --border-color: #2c2c2c;
  --accent: #0d6efd;
  --success: #198754;
  --danger: #dc3545;
}

body {
  background-color: var(--bg-page);
  color: var(--text-main);
  font-family: "Segoe UI", sans-serif;
}

 #globalSpinner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(255, 255, 255, 0.95);
      z-index: 9999;
      animation: fadeIn 0.3s ease-out;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.navbar-tabs .nav-link {
  color: var(--text-muted);
}

.navbar-tabs .nav-link.active {
  color: var(--text-main);
  border-bottom: 2px solid var(--accent);
}

.card {
  background-color: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 8px;
}

.card-body {
  padding: 16px;
}

.answer-option {
  background-color: #2a2a2a;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 10px 12px;
  margin-top: 8px;
  cursor: pointer;
  color: var(--text-main);
}

.answer-option:hover {
  background-color: #333333;
}

.answer-option.selected {
  background-color: var(--accent);
  color: white;
  border-color: var(--accent);
}

.toolbar {
  padding: 12px;
  background-color: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 8px;
}

.btn-soft {
  background-color: rgb(5, 9, 29);

  color: var(--text-main);
  border: 1px solid var(--border-color);
}

.btn-soft:hover {
  background-color: #111a2b;
}

.table-dark {
  --bs-table-bg: #1e1e1e;
  --bs-table-border-color: var(--border-color);
}

.highlight {
  background-color: var(--success);
  color: white;
  padding: 2px 4px;
  border-radius: 4px;
}

input,
select {
  background-color: #2a2a2a;
  color: var(--text-main);
  border: 1px solid var(--border-color);
}

input:focus,
select:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: none;
}
#searchTab .form-check-input,
#searchTab .form-check-label {
  touch-action: manipulation;
}
  </style>

  <style>
    :root{
      --bg:#0b0d13;
      --surface:#111827;
      --border:#273244;
      --text:#f3f4f6;
      --muted:#cbd5e1;
      --primary:#60a5fa;
      --success:#16a34a;
      --danger:#dc2626;
      --warning:#f59e0b;
    }
    body{background:var(--bg);color:var(--text)}
    .navbar, .navbar-dark, .navbar-light{background:var(--surface)!important}
    .card{background:var(--surface);border-color:var(--border)}
    .list-group-item{background:var(--surface);color:var(--text);border-color:var(--border)}
    .table{color:var(--text)}
    .table thead th{color:var(--text)}
    .table-dark{--bs-table-bg:#101624;--bs-table-striped-bg:#141c2b;--bs-table-striped-color:var(--text)}
    .form-control, .form-select, .form-check-input{
      background:#0f1520!important; color:var(--text)!important; border-color:var(--border)!important;
    }
    .form-control::placeholder{color:#90a4bf}
    .btn{border-radius:12px}
    .btn-outline-light{--bs-btn-color:#e5e7eb;--bs-btn-border-color:#5b6b83;--bs-btn-hover-bg:#1e293b}
    .btn-primary{background:#2563eb;border-color:#1d4ed8}
    .btn-success{background:var(--success)!important;border-color:#15803d!important}
    .btn-danger{background:var(--danger)!important;border-color:#991b1b!important}
    .btn-warning{background:var(--warning)!important;border-color:#b45309!important;color:#111827!important}
    .badge{border-radius:10px}
    .muted, .text-muted{color:var(--muted)!important}
    .answer-btn{white-space:normal;text-align:left}
    .ans-correct{background:#12391f!important;border-color:#14532d!important}
    .ans-wrong{background:#3a1616!important;border-color:#7f1d1d!important}
    #navigator .btn{min-width:42px}
  </style>

  <style>
    /* Improve layout for small screens */
    @media (max-width: 576px){
      :root { --text: #ffffff; --text-muted:#e5e7eb; }
      body { font-size: 16px; }
      .container { padding-left: 14px; padding-right: 14px; }
      .btn { min-height: 44px; }
      .answer-btn { padding: 12px 14px; font-size: 16px; }
      #navigator .btn { min-width: 44px; min-height: 44px; padding: 6px 8px; }
      .form-control, .form-select { font-size: 16px; padding: 10px 12px; }
      .badge { font-size: 0.95rem; }
      .card { margin-bottom: 14px; }
    }
    /* Ensure tables are scrollable horizontally on narrow screens */
    .table-responsive { overflow-x: auto; }
    /* Make buttons wrap nicely */
    .btn-group, .d-flex { flex-wrap: wrap; }
  </style>

  <style>
    img, video { max-width: 100%; height: auto; }
    .w-100-sm { width: 100%; }
  </style>

  <style>
    /* Keep navbar always visible at the bottom */
    #navBar{
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 1030;
      display: flex;
      white-space: nowrap; 
    }
    #navBar .btn { max-width: 100%; }
    @media (max-width: 576px) {
  #navBar .btn {
    padding: 6px 10px;     /* nh·ªè g·ªçn h∆°n ps-4 pe-4 */
    font-size: 14px;
    line-height: 1.2;
  }
  .answer-option,
#navBar .btn {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

  /* nh√≥m gi·ªØa kh√¥ng b·ªã √©p xu·ªëng d√≤ng */
  #navigator { gap: 6px; }
}
    /* Reserve space so content isn't hidden behind the nav */
    body{ padding-bottom: 72px; }
    /* Scroll only the question content area */
    #questionContainer{
      max-height: calc(100vh - 260px);
      overflow-y: auto;
    }
    @media (max-width: 576px){
      body{ padding-bottom: 56px; }
      #questionContainer{ max-height: calc(100vh - 300px); }
    }

    /* === GoTop floating button === */
    #goTopBtn{
      position: fixed;
      color: rgb(15, 71, 175);
      right: calc(50vw - 50px);
      bottom: 6px; /* n·∫±m tr√™n thanh nav c·ªë ƒë·ªãnh */
      z-index: 1040;
      padding: 3px 17px;
      display: none; /* ch·ªâ hi·ªán ·ªü tab Th∆∞ vi·ªán */
      /*border-radius: 999px;*/
      background: rgba(17, 24, 39, 0.35) !important;
      border: none !important;
      
    }
     #goTopBtn:hover{
      background: rgba(29, 78, 216, 0.85) !important;
      color: #fff;}
    @media (max-width: 576px){
      #goTopBtn{ bottom: 6px; }
    }

    /* Animation: ƒë√∫ng */
.correct-burst {
  animation: burst 0.2s ease-out;
}
@keyframes burst {
  0% { transform: scale(1); box-shadow: 0 0 0 rgba(13, 110, 189, 0.5);}
  50% { transform: scale(1.2); box-shadow: 0 0 20px rgba(5, 11, 65, 0.7);}
  100% { transform: scale(1); box-shadow: 0 0 0 rgba(0,255,127,0);}
}

@keyframes dangerFlash {
  0%, 100% { opacity: 0.3; box-shadow: 0 0 10px rgba(255,0,0,0.4); }
  50% { opacity: 0.8; box-shadow: 0 0 20px rgba(255,0,0,0.8); }
}

/* Animation: sai */
.wrong-shake {
  animation: shake 0.1s ease-in-out;
  background: #3a0d0d !important;
  border-color: #571414 !important;
}
@keyframes shake {
  0% { transform: translateX(0); }
  20% { transform: translateX(-6px); }
  40% { transform: translateX(6px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
  100% { transform: translateX(0); }
}
.form-switch .form-check-input:checked {
  background-color: #00bfff !important;
  border-color: #00bfff !important;
}
  </style>
</head>
<body>
  <div id="globalSpinner" class="justify-content-center align-items-center vh-100 w-100 position-fixed top-0 start-0 bg-white bg-opacity-90 z-3" style="display: flex;">
  <div class="spinner-border text-primary" role="status" style="width: 4rem; height: 4rem;">
    <span class="visually-hidden">ƒêang t·∫£i d·ªØ li·ªáu...</span>
  </div>
</div>

  <div id="appContent" class="container p-0" style="display: none;">
    <h3 class="text-center mb-1 fw-bold d-none">Tr·∫Øc nghi·ªám - Quiz</h3>

    <ul class="nav navbar-tabs mb-1" id="mainTabs">
      <li class="nav-item"><a class="nav-link active" href="#" onclick="switchTab('home')">Tr·∫Øc nghi·ªám</a></li>
      <li class="nav-item"><a class="nav-link" href="#" onclick="switchTab('search')">Th∆∞ vi·ªán</a></li>
      <li class="nav-item"><a class="nav-link" href="#" onclick="switchTab('about')">Help</a></li>
    </ul>

    <div id="homeTab">
      <div id="configSection" class="card mb-1">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="badge-soft text-info w-auto me-3">ü•á Ch·ªçn b·ªô ƒë·ªÅ/lƒ©nh v·ª±c</span>
            
            <div class="d-flex align-items-center justify-content-end" >
        
        <label for="examTime" class="text-info  me-1">‚è±Ô∏è</label> 

       <div class="input-group input-group-sm" style="width: 100px;"> 
    <input 
        type="number" 
        class="form-control"
        id="examTime" 
        min="0" 
        step="1" 
        value="0"
        required
    >
    <span class="input-group-text p-1 text-info" style="background-color: transparent !important; border-color: var(--border) !important;">ph√∫t</span>
</div>
    </div>
        </div>

  <select id="quizListSelect" class="form-select" style="color: var(--bs-warning) !important;" onchange="loadSelectedQuiz()">
   
  </select>
  <hr class="text-light">
           <div id="fieldInputs" class="row g-3"></div>
            <hr class="text-light">
          <div class="text-center mt-3">
            <button class="btn btn-outline-primary me-2" onclick="startPractice()">√în thi</button>
            <button class="btn btn-outline-warning me-2" onclick="showReview()">√în t·∫≠p</button>
            <button class="btn btn-outline-success" onclick="startExam()">Thi th·∫≠t</button>
            <a class="btn btn-outline-primary"href="../../index.html">üè†</a>
          </div>
</div>
          

         
        </div>
      </div>

      <div id="quizContainer"></div>

      <div id="navBar" class="toolbar justify-content-between align-items-center m-0 p-1 flex-nowrap  overflow-hidden" style="display:none !important;">
  <div id="timeProgress"
       class="position-absolute top-0 start-0 bg-info"
       style="height: 100%; width: 50%; opacity: 0.75; z-index: 0; transition: width 1s linear;">
  </div>
  <div class="row m-auto z-3">
  <div class="d-flex col-auto p-0 justify-content-between flex-shrink-1">
    <button class="btn btn-soft px-3 text-warming" style="color: yellow" onclick="submitQuiz()">‚ûú]</button>
    <button id="helpme" class="btn btn-soft px-3" style="color:#0d6efd" title="Hi·ªÉn th·ªã ƒë√°p √°n (Ctrl+I)" onclick="showHelp()">‚ìò</button>
  </div>
  <div class="d-flex col-auto p-0 justify-content-center flex-nowrap" id="navigator">
    <button class="btn btn-soft px-3" title="V·ªÅ c√¢u tr∆∞·ªõc (‚Üê ho·∫∑c ‚Üë)" onclick="goPrev()">L√πi‚Ü©</button>
    <button id="btnNotSelected" class="btn btn-soft px-1 text-info" title="C√¢u ti·∫øp/C√¢u ch∆∞a l√†m (Space)" onclick="goNotSelected()">0</button>
    <button class="btn btn-soft px-3" title="V·ªÅ c√¢u tr∆∞·ªõc (‚Üí ho·∫∑c ‚Üì)" onclick="goNext()">‚Ü™Ti·∫øn</button>
  </div>

  </div>
</div>

<div id="reviewNavBar" 
     style="display:none; position:fixed; bottom:0; left:0; right:0; 
            background-color: transparent !important;
            padding:8px 12px; text-align:center; z-index:1000;">
  <button class="btn btn-secondary me-2" style="background: rgba(17, 24, 39, 0.35) !important;" onclick="backToConfig()">üè† Trang ch·ªß</button>
</div>

      <div id="resultView" class="card mt-3" style="display:none;">
  <div class="card-body text-center">
    <div id="resultIcon" style="font-size:36px; line-height:1.2;">üèÜ</div>
    <h4 class="mt-2 mb-3 text-info">K·∫øt qu·∫£</h4>

    <div class="row g-3 justify-content-center mb-3">
      <div class="col-12 col-md-3">
        <div class="p-3 rounded-3" style="background:#0f1520;border:1px solid var(--border);">
          <div class="muted">Th·ªùi gian</div>
          <div id="rsTime" class="fs-5 fw-semibold text-info">00:00</div>
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="p-3 rounded-3" style="background:#0f1520;border:1px solid var(--border);">
          <div class="muted">ƒê√∫ng / T·ªïng</div>
          <div id="rsCorrect" class="fs-5 fw-semibold  text-info">0 / 0</div>
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="p-3 rounded-3" style="background:#0f1520;border:1px solid var(--border);">
          <div class="muted">ƒêi·ªÉm</div>
          <div id="rsScore" class="fs-5 fw-semibold  text-info">0</div>
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="p-3 rounded-3" style="background:#0f1520;border:1px solid var(--border);">
          <div class="muted">X·∫øp lo·∫°i</div>
          <div id="rsRank" class="fs-5 fw-semibold  text-info" >‚Äî</div>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-center gap-2">
      <button class="btn btn-outline-primary" onclick="resetToHome()">üè†</button>
      <button id="rsActionBtn" class="btn btn-outline-primary">üîÅ Thi l·∫°i</button>
    </div>
  </div>
</div>

    </div>

    <div id="searchTab" style="display:none;">
      <div class="card mb-3">
      <div class="card-body p-1">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <div class="form-check form-switch">
  <input class="form-check-input" type="checkbox" role="switch" id="includeAnswers">
  <label class="form-check-label text-info" for="includeAnswers">T√¨m c·∫£ ƒê.A</label>
</div>
         <div class="form-check form-switch">
  <input class="form-check-input" type="checkbox" role="switch" id="includeAllSources">
  <label class="form-check-label text-info" for="includeAllSources">trong t·∫•t c·∫£ b·ªô ƒë·ªÅ</label>
</div>

        </div>
        <input id="searchInput" class="form-control bg-dark text-light border-secondary" placeholder="üîç N·ªôi dung t√¨m ki·∫øm... (vd: AI%ng√¢n h√†ng)" oninput="searchQuestions()" />
      </div>
      </div>
      <div id="searchResults">
        <div class="text-align text-muted ">Nh·∫≠p t·ª´ kh√≥a ƒë·ªÉ t√¨m ki·∫øm c√¢u h·ªèi trong th∆∞ vi·ªán. Kh√¥ng ph√¢n bi·ªát ch·ªØ hoa, ch·ªØ th∆∞·ªùng, s·ª≠ d·ª•ng k√Ω t·ª± % ƒë·ªÉ thay cho t·ª´ b·∫•t k·ª≥ (v√≠ d·ª• khi g√µ "AI%ng√¢n h√†ng" th√¨ s·∫Ω li·ªát k√™ t·∫•t c·∫£ n·ªôi dung c√≥ ch·ª©a "AI" v√† "ng√¢n h√†ng" nh∆∞ "Ai trong ho·∫°t ƒë·ªông ng√¢n h√†ng", "V·ªõi AI, lƒ©nh v·ª±c ng√¢n h√†ng s·∫Ω c√≥ nhi·ªÅu b∆∞·ªõc ti·∫øn ƒë·ªôt ph√°",...)</div>
      </div>
    </div>
    <div id="aboutTab" class="card h-100" style="display:none;">
  <div class="card-body text-info">
    <h5 class="card-title">Help</h5>
        <p class="card-text">
<hr>
<p>
  üö® C·∫≠p nh·∫≠p t√≠nh nƒÉng m·ªõi: L∆∞u tr·ªØ nhi·ªÅu b·ªô ƒë·ªÅ thi; khi t√¨m ki·∫øm c√≥ th·ªÉ ch·ªçn t√¨m to√†n b·ªô bao g·ªìm c√°c b·ªô ƒë·ªÅ c≈©; chu·∫©n h√≥a b·ªô c√¢u h·ªèi v√† n·ªôi dung t√¨m ki·∫øm theo ti√™u chu·∫©n!
</p>
<p>
üö® Ph√≠m
        t·∫Øt: Ph√≠m m≈©i t√™n tr√°i/l√™n (tr·ªü v·ªÅ c√¢u tr∆∞·ªõc), ph·∫£i/xu·ªëng (c√¢u ti·∫øp),
        Space (c√¢u ti·∫øp/c√¢u ch∆∞a l√†m), Ctrl+I (Xem ƒë√°p √°n).)
</p>
<p>
üìå N·ªôi dung √¥n luy·ªán mang t√≠nh ch·∫•t tham kh·∫£o. C√°c c√¢u h·ªèi v√† ƒë√°p √°n trong ph·∫ßn n√†y c√≥ th·ªÉ kh√¥ng ch√≠nh x√°c.<br>
Ch√∫c b·∫°n lu√¥n vui v·∫ª üòä v√† ƒë·∫°t ƒëi·ªÉm cao trong k·ª≥ thi s·∫Øp t·ªõiüèÜ
</p>
<hr></p>

  </div>
</div>
  </div>

  <button id="goTopBtn" class="btn fw-semibold rounded-circle" onclick="goTopFocusSearch()" title="Nh·∫£y l√™n √¥ t√¨m ki·∫øm & ch·ªçn s·∫µn">‚¨Ü
  </button>

  <script src="../js/custom.js"></script>
  <script src="../js/quiz.js"></script>
  
</body>
</html>